(function(){var e,t=function(e,t){return function(){return e.apply(t,arguments)}};e=function(){"use strict";function e(e){this._getValFromMouseEvent=t(this._getValFromMouseEvent,this),this._onMouseup=t(this._onMouseup,this),this._onSliderClick=t(this._onSliderClick,this),this._onHandleMousemove=t(this._onHandleMousemove,this),this._onHandleMousedown=t(this._onHandleMousedown,this),this._onHandleKeydown=t(this._onHandleKeydown,this),this._settings={el:null,max:100,min:0,value:25,bar:!0,labels:!1,step:1,onChange:null,onDrag:null},this._activeDrag=!1,this._sliderAttr={},this._cache=[],$.extend(this._settings,e),this._validateHandles(),this._render(),this._settings.labels&&this._renderEdgeLabels(),this._initSelectors(),this._initEvents(),this._renderHandleChanges()}return e.prototype._validateHandles=function(){this._settings.step!==1&&(this._settings.value=Math.round(this._settings.value/this._settings.step)*this._settings.step),this._settings.value=this._validateValue(this._settings.value),this._settings.value>this._settings.max&&(this._settings.value=this._settings.max);if(this._settings.value<this._settings.min)return this._settings.value=this._settings.min},e.prototype._render=function(){return this._settings.labels&&this._settings.el.append('            <span class="label min"></span>            <span class="label current"></span>            <span class="label max"></span>'),this._settings.bar&&this._settings.el.append('<div class="bar"></div>'),this._settings.el.append('<a href="#" class="handle"></a>')},e.prototype._renderEdgeLabels=function(){return this._settings.el.find(".min").text(this._settings.min).end().find(".max").text(this._settings.max)},e.prototype._initSelectors=function(){return this._cache.document=$(document),this._cache.slider=this._settings.el,this._settings.bar&&(this._cache.bar=this._settings.el.find(".bar")),this._cache.handle=this._settings.el.find(".handle"),this._settings.labels&&(this._cache.current=this._settings.el.find(".current")),this._sliderAttr={width:this._cache.slider.outerWidth()}},e.prototype._initEvents=function(){return this._cache.handle.on("keydown",this._onHandleKeydown),this._cache.handle.on("mousedown",this._onHandleMousedown),this._cache.slider.on("click",this._onSliderClick),this._cache.document.on("mouseup",this._onMouseup)},e.prototype._changeHandle=function(e){return this._settings.value=this._settings.value+(e==="r"?this._settings.step:-this._settings.step),this._validateHandles(),this._renderHandleChanges(),this._fireOnChange()},e.prototype._renderHandleChanges=function(){this._cache.handle.css("left",this._settings.value+"%"),this._settings.bar&&this._cache.bar.css({width:this._settings.value+"%"});if(this._settings.labels)return this._cache.current.text(this._settings.value)},e.prototype._onHandleKeydown=function(e){var t,n;if((t=e.keyCode)===37||t===38||t===39||t===40||t===65||t===68||t===83||t===87)return this._changeHandle((n=e.keyCode)===37||n===40||n===65||n===83?"l":"r")},e.prototype._onHandleMousedown=function(e){return this._activeDrag=!0,this._cache.document.on("mousemove",this._onHandleMousemove),!1},e.prototype._onHandleMousemove=function(e){if(this._activeDrag)return this._setSliderValueOnDrag(e)},e.prototype._onSliderClick=function(e){return this._settings.value=this._getValFromMouseEvent(e),this._validateHandles(),this._renderHandleChanges(),this._fireOnChange(),this._cache.handle.focus(),!1},e.prototype._onMouseup=function(e){return this._activeDrag&&(this._setSliderValueOnDrag(e),this._fireOnChange(),this._cache.handle.focus()),this._activeDrag=!1,this},e.prototype._fireOnChange=function(){if(this._settings.onChange!=null)return this._settings.onChange(this._settings.value)},e.prototype._getValFromMouseEvent=function(e){return this._validateValue((e.pageX-this._cache.slider.offset().left)/this._sliderAttr.width*100)},e.prototype._setSliderValueOnDrag=function(e){return this._settings.value=this._getValFromMouseEvent(e),this._validateHandles(),this._settings.onDrag!=null&&this._settings.onDrag(this._settings.value),this._renderHandleChanges()},e.prototype._validateValue=function(e){var t,n,r;return this._settings.step%1===0?parseInt(e,10):(r=(this._settings.step+"").split("."),t=r[0],n=r[1],parseFloat(e.toFixed(n.length)))},e.prototype.getValue=function(){return this._settings.value},e.prototype.setValue=function(e,t){t==null&&(t=!0),this._settings.value=e,this._validateHandles(),this._renderHandleChanges();if(t)return this._fireOnChange()},e}(),typeof define=="function"&&define.amd?define("SliderBarr",[],function(){return e}):window.SliderBarr=e}).call(this);